"use strict";(self["webpackChunkTrendBook"]=self["webpackChunkTrendBook"]||[]).push([[882],{882:function(s,e,t){t.r(e),t.d(e,{default:function(){return j}});var a=t(6252),o=t(3577),r=t(9963);const i=s=>((0,a.dD)("data-v-36665b0c"),s=s(),(0,a.Cn)(),s),l={class:"row rounded align-items-center justify-content-center bg-light p-5"},n=i((()=>(0,a._)("div",{class:"col-xl-6 col-md-8"},[(0,a._)("img",{class:"w-100",src:"https://i.imgur.com/x4XY4zr.png",alt:""})],-1))),c={class:"col-xl-6 col-md-8 d-flex align-items-center justify-content-center"},d={class:"w-100"},u={class:"mb-3 d-flex flex-column align-items-center"},m={key:0,class:"logo"},p={key:1,class:"logo"},g={class:"mb-3"},h={key:0,class:"mb-3"},b=i((()=>(0,a._)("label",{class:"form-label font-customize-style",for:"name"},"名稱",-1))),f={class:"invalid-feedback mt-2"},w={class:"mb-3"},y=i((()=>(0,a._)("label",{class:"form-label font-customize-style",for:"Email"},"Email",-1))),k={class:"invalid-feedback mt-2"},_={class:"mb-3"},v=i((()=>(0,a._)("label",{class:"form-label font-customize-style",for:"password"},"密碼",-1))),A={class:"invalid-feedback mt-2"},P={key:1,class:"mb-3"},M=i((()=>(0,a._)("label",{class:"form-label font-customize-style",for:"password"},"再次輸入密碼",-1))),z={class:"invalid-feedback mt-2"},D={key:0,class:"wrong-msg"},x={class:"d-flex flex-column"},U={key:0,class:"d-flex"},V=i((()=>(0,a._)("label",{class:"me-3",for:"male"},"記住我",-1))),C={key:1,class:"d-flex mt-3"},E={class:"d-flex"},I=i((()=>(0,a._)("label",{class:"me-3",for:"account"},"遊客帳號",-1))),R=i((()=>(0,a._)("label",{class:"me-3",for:"account2"},"遊客帳號2",-1))),W=i((()=>(0,a._)("label",{class:"me-3",for:"account3"},"遊客帳號3",-1))),q=i((()=>(0,a._)("label",{class:"me-3",for:"account4"},"遊客帳號4",-1))),B=(0,a.Uk)(" 註冊 "),S={key:0,class:"spinner-border spinner-border-sm",role:"status"},T=(0,a.Uk)(" 登入 "),Z={key:0,class:"spinner-border spinner-border-sm",role:"status"};function G(s,e,t,i,G,$){return(0,a.wg)(),(0,a.iD)("main",l,[n,(0,a._)("div",c,[(0,a._)("div",d,[(0,a._)("div",u,[G.isRegister?((0,a.wg)(),(0,a.iD)("p",m,"註冊")):((0,a.wg)(),(0,a.iD)("p",p,"到 TrendBook 展開全新社交圈"))]),(0,a._)("div",g,[G.isRegister?((0,a.wg)(),(0,a.iD)("div",h,[b,(0,a.wy)((0,a._)("input",{type:"text",class:(0,o.C_)(["form-control mt-1",G.state.name?"is-invalid":""]),id:"name",placeholder:"輸入名稱","aria-label":"輸入名稱","aria-describedby":"button-addon2","onUpdate:modelValue":e[0]||(e[0]=s=>G.user.name=s),onInput:e[1]||(e[1]=s=>$.formatVerify(!0))},null,34),[[r.nr,G.user.name]]),(0,a._)("div",f,(0,o.zw)(G.errorMessage.name),1)])):(0,a.kq)("",!0),(0,a._)("div",w,[y,(0,a.wy)((0,a._)("input",{type:"text",class:(0,o.C_)(["form-control",G.state.email?"is-invalid":""]),id:"Email",placeholder:"輸入 Email","aria-label":"輸入 Email","aria-describedby":"button-addon2","onUpdate:modelValue":e[2]||(e[2]=s=>G.user.email=s),onInput:e[3]||(e[3]=s=>$.formatVerify()),onKeyup:e[4]||(e[4]=(0,r.D2)(((...s)=>$.login&&$.login(...s)),["enter"]))},null,34),[[r.nr,G.user.email]]),(0,a._)("div",k,(0,o.zw)(G.errorMessage.email),1)]),(0,a._)("div",_,[v,(0,a.wy)((0,a._)("input",{type:"password",class:(0,o.C_)(["form-control",G.state.password?"is-invalid":""]),id:"password",placeholder:"輸入密碼","aria-label":"輸入密碼","aria-describedby":"button-addon2","onUpdate:modelValue":e[5]||(e[5]=s=>G.user.password=s),onInput:e[6]||(e[6]=s=>$.formatVerify()),onKeyup:e[7]||(e[7]=(0,r.D2)(((...s)=>$.login&&$.login(...s)),["enter"]))},null,34),[[r.nr,G.user.password]]),(0,a._)("div",A,(0,o.zw)(G.errorMessage.password),1)]),G.isRegister?((0,a.wg)(),(0,a.iD)("div",P,[M,(0,a.wy)((0,a._)("input",{type:"password",class:(0,o.C_)(["form-control",G.state.confirmPassword?"is-invalid":""]),id:"password",placeholder:"再次輸入密碼","aria-label":"再次輸入密碼","aria-describedby":"button-addon2","onUpdate:modelValue":e[8]||(e[8]=s=>G.user.confirmPassword=s),onInput:e[9]||(e[9]=s=>$.formatVerify(!0)),onKeyup:e[10]||(e[10]=(0,r.D2)(((...s)=>$.login&&$.login(...s)),["enter"]))},null,34),[[r.nr,G.user.confirmPassword]]),(0,a._)("div",z,(0,o.zw)(G.errorMessage.confirmPassword),1)])):(0,a.kq)("",!0)]),G.errorMessage.loginError?((0,a.wg)(),(0,a.iD)("div",D,[(0,a._)("span",null,(0,o.zw)(G.errorMessage.loginError),1)])):(0,a.kq)("",!0),(0,a._)("div",x,[G.isRegister?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",U,[(0,a.wy)((0,a._)("input",{placeholder:"記住我",class:"me-2 mt-1",id:"male",type:"checkbox",value:"true","onUpdate:modelValue":e[11]||(e[11]=s=>G.savePassWord=s)},null,512),[[r.e8,G.savePassWord]]),V])),G.isRegister?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",C,[(0,a._)("div",E,[(0,a.wy)((0,a._)("input",{placeholder:"遊客帳號",class:"me-2 mt-1",name:"touristsAccount",id:"account",type:"radio",value:"0",onChange:e[12]||(e[12]=s=>$.selectTouristsAccount()),"onUpdate:modelValue":e[13]||(e[13]=s=>G.touristsAccount=s)},null,544),[[r.G2,G.touristsAccount]]),I,(0,a.wy)((0,a._)("input",{placeholder:"遊客帳號",class:"me-2 mt-1",name:"touristsAccount",id:"account2",type:"radio",value:"1",onChange:e[14]||(e[14]=s=>$.selectTouristsAccount()),"onUpdate:modelValue":e[15]||(e[15]=s=>G.touristsAccount=s)},null,544),[[r.G2,G.touristsAccount]]),R,(0,a.wy)((0,a._)("input",{placeholder:"遊客帳號",class:"me-2 mt-1",name:"touristsAccount",id:"account3",type:"radio",value:"2",onChange:e[16]||(e[16]=s=>$.selectTouristsAccount()),"onUpdate:modelValue":e[17]||(e[17]=s=>G.touristsAccount=s)},null,544),[[r.G2,G.touristsAccount]]),W,(0,a.wy)((0,a._)("input",{placeholder:"遊客帳號",class:"me-2 mt-1",name:"touristsAccount",id:"account4",type:"radio",value:"3",onChange:e[18]||(e[18]=s=>$.selectTouristsAccount()),"onUpdate:modelValue":e[19]||(e[19]=s=>G.touristsAccount=s)},null,544),[[r.G2,G.touristsAccount]]),q])])),G.isRegister?((0,a.wg)(),(0,a.iD)(a.HY,{key:2},[(0,a._)("button",{onClick:e[20]||(e[20]=(...s)=>$.singUp&&$.singUp(...s)),type:"button",class:"btn btn-primary btn-customize mt-4"},[B,G.loading?((0,a.wg)(),(0,a.iD)("div",S)):(0,a.kq)("",!0)]),(0,a._)("button",{onClick:e[21]||(e[21]=(...s)=>$.checkButton&&$.checkButton(...s)),type:"button",class:"btn btn-primary btn-customize-disable mt-4"}," 登入 ")],64)):((0,a.wg)(),(0,a.iD)(a.HY,{key:3},[G.isRegister?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("button",{key:0,onClick:e[22]||(e[22]=(...s)=>$.login&&$.login(...s)),class:"btn btn-primary btn-customize mt-4"},[T,G.loading?((0,a.wg)(),(0,a.iD)("div",Z)):(0,a.kq)("",!0)])),(0,a._)("button",{onClick:e[23]||(e[23]=(...s)=>$.checkButton&&$.checkButton(...s)),type:"button",class:"btn btn-primary btn-customize mt-4"}," 註冊帳號 ")],64))])])])])}var $={data(){return{errorMessage:{name:null,email:null,passWord:null,signUpError:null,confirmPassword:null,loginError:null},state:{name:!1,email:!1,passWord:!1,signUpError:!1,confirmPassword:!1},loading:!1,isRegister:!1,user:{name:"",email:"",password:"",confirmPassword:""},savePassWord:!0,touristsAccount:null,touristsAccounts:[{email:"abcd1234@gmail.com",password:"abcd1234"},{email:"abcd12345@gmail.com",password:"abcd12345"},{email:"abcd123456@gmail.com",password:"abcd123456"},{email:"aabcd1234567@gmail.com",password:"aabcd1234567"}]}},methods:{formatVerify(s){const e=[],t=/^([a-zA-Z0-9_\.\-\+])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/,a=/^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{8,}$/;for(const o in this.state)this.state[o]=!1;return this.user.name.length<2&&s&&(this.state.name=!0,this.errorMessage.name="暱稱至少 2 個字元以上",e.push(this.errorMessage.name)),t.test(this.user.email)||(this.errorMessage.email="Email 格式錯誤",this.state.email=!0,e.push(this.errorMessage.email)),this.user.email||(this.errorMessage.email="Email 未輸入",this.state.email=!0,e.push(this.errorMessage.email)),a.test(this.user.password)||(this.errorMessage.password="密碼需至少 8 碼以上，並數字英文混合",this.state.password=!0,e.push(this.errorMessage.passwor)),this.user.confirmPassword===this.user.password&&this.user.confirmPassword||!s||(this.errorMessage.confirmPassword="與密碼不同",this.state.confirmPassword=!0,e.push(this.errorMessage.confirmPassword)),0===e.length},login(){this.formatVerify()&&(this.loading=!0,this.axios.post("https://trend-book-api.herokuapp.com/users/sign_in",this.user).then((s=>{localStorage.setItem("test-token",s.data.user.token),this.$router.push("/posts"),this.loading=!1,this.savePassWord?localStorage.setItem("tempPassWord",JSON.stringify(this.user)):localStorage.setItem("tempPassWord","")})).catch((s=>{this.loading=!1,this.errorMessage.loginError=s.response.data.message})))},singUp(){this.formatVerify(!0)&&(this.loading=!0,this.axios.post("https://trend-book-api.herokuapp.com/user/sign_up",this.user).then((s=>{localStorage.setItem("test-token",s.data.user.token),this.$router.push("/posts"),this.loading=!1})).catch((s=>{this.loading=!1,this.errorMessage.loginError=s.response.data.message})))},checkButton(){this.isRegister=!this.isRegister,this.user={name:"",email:"",password:"",confirmPassword:""},this.errorMessage.loginError="";for(const s in this.state)this.state[s]=!1},selectTouristsAccount(){this.user.email=this.touristsAccounts[this.touristsAccount].email,this.user.password=this.touristsAccounts[this.touristsAccount].password}},mounted(){localStorage.getItem("tempPassWord")&&(this.user=JSON.parse(localStorage.getItem("tempPassWord")))}},K=t(3744);const Y=(0,K.Z)($,[["render",G],["__scopeId","data-v-36665b0c"]]);var j=Y}}]);
//# sourceMappingURL=882.76524ddc.js.map