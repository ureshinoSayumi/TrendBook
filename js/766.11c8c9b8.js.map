{"version":3,"file":"js/766.11c8c9b8.js","mappings":"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","sources":["webpack://TrendBook/./src/components/postsCardlView.vue","webpack://TrendBook/./src/components/postsCardlView.vue?ca34","webpack://TrendBook/./src/views/TrendView.vue","webpack://TrendBook/./src/views/TrendView.vue?01f7"],"sourcesContent":["<template>\n  <div>\n    <div class=\"lodingBlock\">\n      <div class=\"spinner-border mx-auto text-light\"\n        style=\"font-size: 0.5rem;\" role=\"status\" v-if=\"loading\">\n        <span class=\"visually-hidden\">Loading...</span>\n      </div>\n    </div>\n    <template v-for=\"post in postData\">\n      <div class=\"card bg-light p-4 mb-3\" v-if=\"$store.state.userInfo\" :key=\"post._id\">\n        <div class=\"card-user d-flex\">\n          <div class=\"card-user-icon font-customize-style\">\n            <router-link :to=\"`/user/${post.user._id}`\" href=\"#\">\n              <img v-if=\"post.user.image\" :src=\"post.user.image\" alt=\"\">\n              <img v-else src=\"https://upload.cc/i1/2022/05/31/dVpHNT.png\" alt=\"\">\n            </router-link>\n          </div>\n          <div class=\"d-flex ms-3 mt-2\">\n            <p>{{ post.user.name }}</p>\n            <p class=\"card-user-date ms-3\">{{ formatDate(post.createdAt) }}</p>\n          </div>\n          <i class=\"bi bi-three-dots icons-item ms-auto\"\n            role=\"button\" id=\"dropdownMenuLink\"\n            data-bs-toggle=\"dropdown\" aria-expanded=\"false\"\n            v-if=\"$store.state.userInfo._id === post.user._id ||\n              $store.state.userInfo.auth === '1'\">\n          </i>\n          <ul class=\"dropdown-menu dropstart\" aria-labelledby=\"dropdownMenuLink\">\n            <li>\n              <a class=\"dropdown-item\" href=\"#\" @click.prevent=\"deletePost(post)\">刪除貼文</a>\n            </li>\n          </ul>\n        </div>\n        <router-link :to=\"`/post/${post._id}`\" href=\"#\">\n          <div class=\"d-flex justify-content-between mt-3 hover\">\n            <div class=\"d-flex pe-2\">\n              <div>\n                <div class=\"d-flex\">\n                  <h3 class=\"font-customize-style fs-5\">[{{ post.type }}]</h3>\n                  <p class=\"font-customize-style fs-5 ps-2\">{{ post.title }}</p>\n                </div>\n                <div class=\"p-1 mt-3\">\n                  <p v-if=\"post.content.length > 50\" class=\"fw-light\">{{ post.content.substring(0, 50) }}...</p>\n                  <p v-else class=\"fw-light\">{{ post.content }}</p>\n                </div>\n              </div>\n            </div>\n            <img v-if=\"post.image\" :src=\"post.image\" alt=\"\">\n          </div>\n          <div class=\"d-flex mt-3\">\n            <i class=\"bi bi-heart-fill icons-heart\"></i>\n            <p class=\"ms-2\">{{ post.likes.length }}</p>\n            <i class=\"bi bi-chat-dots-fill icons-heart ms-4\"></i>\n            <p class=\"ms-2\">{{ post.comments.length }}</p>\n          </div>\n        </router-link>\n      </div>\n    </template>\n    <div class=\"lodingBlock mt-3\">\n      <div class=\"spinner-border mx-auto text-light\"\n        style=\"font-size: 0.5rem;\" role=\"status\" v-if=\"loading && postData.length\">\n        <span class=\"visually-hidden\">Loading...</span>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nexport default {\n  props: {\n    postData: {\n      type: Object,\n      default () { return {} }\n    },\n    loading: {\n      type: Boolean\n    }\n  },\n  emits: ['get-all-post'],\n  data () {\n    return {\n      propsLoading: false,\n      fromData: {\n        comment: null\n      },\n      isEdit: false\n    }\n  },\n  methods: {\n    getAllpost (sort, search) {\n      this.$emit('get-all-post', sort, search)\n    },\n    postComment (post) {\n      this.propsLoading = true\n      const data = this.fromData\n      this.axios.post(`${process.env.VUE_APP_API}posts/${post._id}/comment`, data)\n        .then(() => {\n          this.getAllpost()\n          this.fromData.comment = null\n          this.propsLoading = false\n        })\n        .catch(() => {\n          this.propsLoading = false\n          alert('傳送失敗')\n        })\n    },\n    setLike (post) {\n      const isLike = post.likes.find((item) => item.name === this.$store.state.userInfo.name)\n      if (isLike) {\n        this.clearLike(post)\n        return\n      }\n      this.propsLoading = true\n      this.axios.post(`${process.env.VUE_APP_API}post/${post._id}/like`)\n        .then(() => {\n          this.getAllpost()\n          this.propsLoading = false\n        })\n        .catch(() => {\n          this.propsLoading = false\n          alert('按讚失敗')\n        })\n    },\n    clearLike (post) {\n      this.propsLoading = true\n      this.axios.delete(`${process.env.VUE_APP_API}post/${post._id}/unlike`)\n        .then(() => {\n          this.getAllpost(this.filter, this.searchPost)\n          this.propsLoading = false\n        })\n        .catch(() => {\n          this.propsLoading = false\n          alert('收回失敗')\n        })\n    },\n    formatDate (str) {\n      const date = new Date(str)\n      const formattedDate = `${date.getFullYear()}-${(date.getMonth() + 1)}-${date.getDate()} ${date.getHours()}:${date.getMinutes()}:${date.getSeconds()}`\n      return formattedDate\n    },\n    deletePost (post) {\n      this.propsLoading = true\n      this.axios.delete(`${process.env.VUE_APP_API}posts/${post._id}`)\n        .then(() => {\n          this.getAllpost(this.filter, this.searchPost)\n          this.propsLoading = false\n        })\n        .catch(() => {\n          this.propsLoading = false\n          alert('刪除失敗')\n        })\n    },\n    deleteComment (comment) {\n      this.propsLoading = true\n      this.axios.delete(`${process.env.VUE_APP_API}posts/${comment._id}/comment`)\n        .then(() => {\n          this.getAllpost(this.filter, this.searchPost)\n          this.propsLoading = false\n        })\n        .catch(() => {\n          this.propsLoading = false\n          alert('刪除失敗')\n        })\n    },\n    updataComment (comment) {\n      const data = { comment: comment.comment }\n      this.isEdit = true\n      this.axios.patch(`${process.env.VUE_APP_API}posts/${comment._id}/comment`, data)\n        .then(() => {\n          this.getAllpost()\n          this.isEdit = false\n        })\n        .catch(() => {\n          this.isEdit = false\n          alert('傳送失敗')\n        })\n    },\n    editComment (comment) {\n      comment.isEdit = true\n    }\n  },\n  mounted () {\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.font-customize-style {\n  font: normal normal bold 16px/24px Noto Sans TC;\n}\n.hover:hover {\n  opacity: .5;\n  cursor: pointer;\n}\nimg {\n  overflow: hidden;\n  height: 100%;\n  width: 80px;\n}\np {\n  margin: 0;\n}\na {\n  text-decoration: none;\n  color: #000000;\n}\n.card {\n  border-radius: 8px;\n}\n.card-user-icon {\n  img {\n    border-radius: 50%;\n    overflow: hidden;\n    height: 40px;\n    width: 40px;\n  }\n}\n.card-user-date {\n  font-size: 13px;\n  color: #9B9893;\n}\n.icons-item {\n  font-size: 1.5rem;\n  color: #7952b3;\n}\n.icons-item:hover {\n  opacity: .5;\n  cursor: pointer;\n}\n.icons-heart {\n  font-size: 1.2rem;\n  color: #7952b3;\n}\n.lodingBlock {\n  display: flex;\n}\n</style>\n","import { render } from \"./postsCardlView.vue?vue&type=template&id=f4e207c8&scoped=true\"\nimport script from \"./postsCardlView.vue?vue&type=script&lang=js\"\nexport * from \"./postsCardlView.vue?vue&type=script&lang=js\"\n\nimport \"./postsCardlView.vue?vue&type=style&index=0&id=f4e207c8&lang=scss&scoped=true\"\n\nimport exportComponent from \"D:\\\\2022 node 直播班\\\\TrendBook\\\\TrendBook\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-f4e207c8\"]])\n\nexport default __exports__","<template>\n  <div class=\"row\">\n    <div class=\"col-xl-8 col-md-12\">\n      <!-- 搜尋 -->\n      <div class=\"row\">\n        <div class=\"col-xl-6 col-md-12 mb-3\">\n          <select class=\"form-select\" aria-label=\"Default select example\"\n            v-model=\"filter\" @change=\"getAllPost(filter, searchPost)\">\n            <option value=\"\">最新貼文</option>\n            <option value=\"asc\">最舊貼文</option>\n          </select>\n        </div>\n        <div class=\"col-xl-6 col-md-12 mb-3\">\n          <div class=\"input-group\">\n            <input type=\"text\" class=\"form-control border-0 pt-2 pb-2\" placeholder=\"搜尋貼文\" aria-label=\"搜尋貼文\" aria-describedby=\"button-addon2\"\n              v-model=\"searchPost\" @keyup.enter=\"getAllPost(filter, searchPost)\">\n            <button class=\"border-0 text-light bg-primary\" @click=\"getAllPost(filter, searchPost)\">\n              <i class=\"bi bi-search\" style=\"font-size: 1.7rem;\"></i>\n            </button>\n          </div>\n        </div>\n      </div>\n      <!-- 貼文牆 -->\n      <postsCardlView\n        :postData=\"allPost\"\n        :loading=\"loading\"\n        @get-all-post=\"getAllPost\"\n      >\n      </postsCardlView>\n      <!-- 如果沒有貼文 -->\n      <AlertView\n        v-if=\"!loading && !allPost.length\"\n        :tagText=\"'目前尚無動態，新增一則貼文吧！'\"\n      >\n      </AlertView>\n    </div>\n    <div class=\"col-xl-4 col-md-12\">\n      <ItemView\n        :modalTitle=\"'發表貼文'\"\n        @get-post-data=\"getAllPost\"\n      >\n      </ItemView>\n    </div>\n  </div>\n</template>\n<script>\nimport postsCardlView from '../components/postsCardlView.vue'\nimport ItemView from '../components/ItemView.vue'\nimport AlertView from '../components/AlertView.vue'\n\nexport default {\n  components: {\n    postsCardlView,\n    ItemView,\n    AlertView\n  },\n  data () {\n    return {\n      name: 'TenndView',\n      // 輸入框\n      searchPost: '',\n      // select\n      filter: '',\n      allPost: [],\n      loading: null,\n      page: 2,\n      scrollEvent: null\n    }\n  },\n  methods: {\n    getAllPost (sort = '-createdAt', search = '', page = 1, scroll = false) {\n      if (this.loading) return\n      this.loading = true\n      const filter = {\n        sort: `?timeSort=${sort}`,\n        search: `&q=${search}`,\n        page: `&page=${page}`\n      }\n      this.axios.get(`${process.env.VUE_APP_API}posts${filter.sort}${filter.search}${filter.page}`)\n        .then((response) => {\n          if (scroll) {\n            if (!response.data.data.length) {\n              window.removeEventListener('scroll', this.scrollEvent)\n            }\n            this.page += 1\n            const temp = this.allPost.concat(response.data.data)\n            this.allPost = temp\n          } else {\n            this.allPost = response.data.data\n            this.page = 2\n          }\n          this.loading = false\n        })\n        .catch((error) => {\n          this.loading = false\n          console.log(error, 'getAllPost')\n        })\n    },\n    getPost () {\n      this.loading = true\n      this.axios.get(`${process.env.VUE_APP_API}posts/${this.$route.params.id}`)\n        .then((response) => {\n          this.allPost = response.data.data\n          this.loading = false\n        })\n        .catch((error) => {\n          this.loading = false\n          console.log(error, 'getAllPost')\n        })\n    },\n    buildThrottle () {\n      function throttle (fn, delay) {\n        let last = 0\n        return function (...args) {\n          const now = Date.now()\n          if (now - last > delay) {\n            last = now\n            fn.apply(this, args)\n          }\n        }\n      }\n      const throttleTask = throttle(this.getAllPost, 1000)\n      this.scrollEvent = () => {\n        const isBottom = window.scrollY + window.innerHeight >= document.body.offsetHeight - 100\n        if (isBottom) {\n          throttleTask(this.filter, this.searchPost, this.page, true)\n        }\n      }\n    },\n    buildScrollEvent () {\n      this.buildThrottle()\n      window.addEventListener('scroll', this.scrollEvent)\n    }\n  },\n  mounted () {\n    if (this.$route.params.id) {\n      this.getPost()\n    } else {\n      this.getAllPost()\n    }\n    this.buildScrollEvent()\n  },\n  beforeUnmount () {\n    window.removeEventListener('scroll', this.scrollEvent)\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.form-select {\n  height: 40px;\n}\n// 如果沒有貼文\n.font-customize-style {\n  font: normal normal bold 16px/24px Noto Sans TC;\n}\n</style>\n","import { render } from \"./TrendView.vue?vue&type=template&id=d072a508&scoped=true\"\nimport script from \"./TrendView.vue?vue&type=script&lang=js\"\nexport * from \"./TrendView.vue?vue&type=script&lang=js\"\n\nimport \"./TrendView.vue?vue&type=style&index=0&id=d072a508&lang=scss&scoped=true\"\n\nimport exportComponent from \"D:\\\\2022 node 直播班\\\\TrendBook\\\\TrendBook\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-d072a508\"]])\n\nexport default __exports__"],"names":["class","style","role","_createElementVNode","_hoisted_3","src","alt","id","_hoisted_30","_createElementBlock","$props","_hoisted_4","_Fragment","_renderList","post","_ctx","state","userInfo","key","_id","_createVNode","_component_router_link","to","user","href","image","_toDisplayString","name","$options","createdAt","auth","onClick","_hoisted_13","type","title","content","length","substring","_hoisted_24","likes","_hoisted_26","comments","_hoisted_31","props","postData","Object","default","loading","Boolean","emits","data","propsLoading","fromData","comment","isEdit","methods","getAllpost","sort","search","this","$emit","postComment","axios","then","catch","alert","setLike","isLike","find","item","$store","clearLike","delete","filter","searchPost","formatDate","str","date","Date","formattedDate","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","deletePost","deleteComment","updataComment","patch","editComment","mounted","__exports__","render","value","_hoisted_5","_hoisted_6","_hoisted_10","$data","$event","onChange","placeholder","onKeyup","_component_postsCardlView","onGetAllPost","_createBlock","_component_AlertView","tagText","_component_ItemView","modalTitle","onGetPostData","components","postsCardlView","ItemView","AlertView","allPost","page","scrollEvent","getAllPost","scroll","get","response","window","removeEventListener","temp","concat","error","console","log","getPost","$route","params","buildThrottle","throttle","fn","delay","last","args","now","apply","throttleTask","isBottom","scrollY","innerHeight","document","body","offsetHeight","buildScrollEvent","addEventListener","beforeUnmount"],"sourceRoot":""}